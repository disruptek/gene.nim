#!/usr/bin/env gene

(fn read_async file
  (var future
    (gene/File/read_async file)
  )
  future
)

(var filename "tests/fixtures/test.txt")
(println "Reading " filename "...")
(var future (read_async filename))
(var content)
(future .on_success
  (s -> (content = s)))
(await future)
(println "Content read:\n" content)
(assert ((content .trim) == "line1\nline2"))
(println "Done.")
